  <html>
  <head>
        <meta charset="UTF-8">
    <link rel=alternate href="https://swdyh.github.io/blog/atom.xml" type="application/atom+xml">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&display=fallback&text=swdyh" rel="stylesheet">
    <link rel="stylesheet" href="main.css">
    <meta name="viewport" content="width=device-width">
    <meta property="og:image" content="https://swdyh.github.io/blog/og.jpg" />
    <meta name="twitter:site" content="@swdyh" />
    <meta name="twitter:card" content="summary">

    <title>usericonsリニューアルとソース公開</title>
    <meta property="og:title" content="usericonsリニューアルとソース公開" />
    <meta property="og:description" content="usericons.relucks.org http://usericons.relucks.org/ とく機能は増えていないんですが、主に裏側をいろいろ改善しました。   cgi.rbからsinat..." />
    <meta property="og:url" content="https://swdyh.github.io/blog/1227359683" />
  </head>
  <body>
      <h1><a href="./">swdyh</a></h1>

  <h2>usericonsリニューアルとソース公開</h2>
  <div>2008-11-22 22:14:43</div>
  <div class="content">
    <p><span itemscope="" itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/swdyh/20081122213037" class="hatena-fotolife" itemprop="url"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/swdyh/20081122/20081122213037.png" alt="f:id:swdyh:20081122213037p:image" title="f:id:swdyh:20081122213037p:image" class="hatena-fotolife" itemprop="image"></a></span></p><p>usericons.relucks.org<br>
<a href="http://usericons.relucks.org/">http://usericons.relucks.org/</a></p><br>
<p>とく機能は増えていないんですが、主に裏側をいろいろ改善しました。</p>

<ul>
<li>cgi.rbからsinatraへ</li>
<li>cgi起動からpassenger(mod_rails)起動へ</li>
<li>HpricotからNokogiriへ</li>
<li>使っているアプケーションやサービスを掲載</li>
<li>ソースをGithubに</li>
<li>ドネーション募集</li>
</ul><p>usericonsはRubyに標準でついてるcgi.rbを使ったindex.cgiがあるだけで、それをそのままcgiとして起動するだけの単純なものだったんですが、最近アクセスが増えてちょっと処理がおいつかなくなってました。最近、sinatraというWebアプリケーションフレームワークを知って、ちょうどいいなと思ったのでsinatraを使って書き直してみました。sinatraは、Railsに比べるとだいぶ軽めで、ちょっとしたWebアプリを書くのにちょうどいいです。rackを使っているので、fcgiとかmongrelとかいろいろな方法で起動させることができます。usericonsではpassengerを使って動かすことにしました。当たり前といえば当たり前だけど、cgiののときよりも大分さくさく動いてます。</p><p>XPathの処理をHpricotからNokogiriを使うようにしました。Hpricotは、ささっとHTMLを処理したいときにはすごく便利で素晴しいんだけど、XPathの処理系として見ると使える関数が少なかったりして、ちょっと物足りない部分がありました。また今後、XPathがサポートされなくなるかもしれないので、この機会にNokogiriにすることにしました。</p><p>使っているアプリケーションやサービスを把握してる範囲で載せました。手動で書いているので、これも載せてとか勝手に載せるなとかが、あればいってください。</p><p>ソースをGithubに置きました。とくに非公開にする理由もないし、なにかの参考になればなあと思って公開することにしました。他のサーバでも動しやすいように、ということは考えてつくっていなかったので、動かそうとするとちょっと面倒かもしれません。</p><p>swdyh's usericons.relucks.org at master ― GitHub<br>
<a href="http://github.com/swdyh/usericons.relucks.org/tree/master">http://github.com/swdyh/usericons.relucks.org/tree/master</a></p><p>ドネーションも募集してます。Paypalのアカウントがあればわりと簡単に送金できます。今はslicehostというホスティングの一番安いプラン(月額20$)で運用していて、メモリが256Mしかないので、もうちょっと増やせたらいいなあと思ってます。</p><p><a href="http://www.pledgie.com/campaigns/2101"><img alt="Click here to lend your support to: usericons.relucks.org and make a donation at www.pledgie.com !" src="http://www.pledgie.com/campaigns/2101.png?skin_name=chrome" border="0"></a></p>


  </div>
  <div>
    <a class="back" href="archive">◀</a>
  </div>
    <footer>
    <div>
      <img src="og.jpg" width="100px"/>
    </div>
    <p>
      swdyhの個人ブログです。プログラミングや日々のことについて書いたりします
      <br>
      <a href="https://swdyh.github.io/">Profile</a> <a href="https://github.com/swdyh">Github</a> <a href="https://twitter.com/swdyh">Twitter</a>
    </p>
  </footer>

  </body>
  </html>
  